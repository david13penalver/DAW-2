<html>
<body>
<h2>Arrays de Objetos</h2>

<button onclick="notasAlumno()">Notas de un alumno</button><br><p>

<button onclick="subeUnPunto()">Subir un punto en cada asignatura</button><br><p>

<button onclick="alumnosCiudad()">Buscar alumnos de una ciudad</button>
<button onclick="alumnosCurso()">Buscar alumnos de un curso</button><br><p>

<button onclick="ordenaEdad()">Ordenar alumnos por edad</button>
<button onclick="ordenaNombreAsc()">Ordenar alumnos por nombre ascendente</button>
<button onclick="ordenaNombreDesc()">Ordenar alumnos por nombre descendente</button><br><p>

<button onclick="borraAlumno()">Borrar alumno</button><br><p>

<button onclick="nuevoAlumno()">Nuevo alumno</button>
<button onclick="nuevaAsignatura()">Nueva asignatura</button>

</body>

<script>
"use strict"
let alumnos=[{'codigo':'DAW-1-2020',
              'nombre':'Pepe',
              'ciudad':'Valencia',
			  'calificaciones':[{'asignatura':'PRG','nota':9},
			                    {'asignatura':'GBD','nota':6}, 
								{'asignatura':'ING','nota':4},
								{'asignatura':'FOL','nota':3}
								],
			  'edad':24},
			  {'codigo':'DAW-2-2020',
			  'nombre':'Juan',
              'ciudad':'Castellon',
			  'calificaciones':[{'asignatura':'DWC','nota':4},
			                    {'asignatura':'DWS','nota':6}, 
								{'asignatura':'DAW','nota':7},
								{'asignatura':'DIW','nota':8},
								{'asignatura':'ING','nota':9},
			                    {'asignatura':'EIE','nota':2}
								],
			  'edad':28},
			  {'codigo':'DAW-1-2019',
			  'nombre':'Ana',
              'ciudad':'Valencia',
			  'calificaciones':[{'asignatura':'PRG','nota':6},
			                    {'asignatura':'GBD','nota':2}, 
								{'asignatura':'ING','nota':6},
								{'asignatura':'FOL','nota':2}
								],
			  'edad':22},
			  {'codigo':'DAW-2-2020',
			  'nombre':'Maria',
              'ciudad':'Castellon',
			  'calificaciones':[{'asignatura':'DWC','nota':4},
			                    {'asignatura':'DWS','nota':6}, 
								{'asignatura':'DAW','nota':7},
								{'asignatura':'DIW','nota':8},
								{'asignatura':'ING','nota':4},
			                    {'asignatura':'EIE','nota':1}
								],
			  'edad':30}
			]
			  

// Solucionar abajo:

function notasAlumno() {	
	let alumno = prompt("Inserta nombre alumno")

	let pos = alumnos.findIndex(a => a.nombre == alumno);

	if (pos == -1) {
		console.log("El alumno no existe");
	} else {
		let media = 0;
		let mejorNota = 0;
		let menorNota = 10;
		let nombreMejor = "";
		let nombreMenor ="";

		alumnos[pos].calificaciones.forEach(c => {
			media += c.nota;	
			if (c.nota > mejorNota) {
				mejorNota = c.nota;
				nombreMejor = c.asignatura;
			}
			if (c.nota < menorNota) {
				menorNota = c.nota;
				nombreMenor = c.asignatura;
			}
		})

		media = media / alumnos[pos].calificaciones.length;
		console.log(`El alumno ${alumnos[pos].nombre} tiene una nota media de ${media}.
		Su mejor nota es un ${mejorNota} en ${nombreMejor}.
		Su peor nota es un ${menorNota} en ${nombreMenor}`);			
	}
}

function subeUnPunto() {
	alumnos.forEach(a => a.calificaciones.forEach(c => c.nota++))
	console.log(alumnos);
}

function alumnosCiudad() {
	let ciudad = prompt("Nombre ciudad");

	let alumnosDeCiudad = alumnos.filter(a => a.ciudad == ciudad);

	if (alumnosDeCiudad.length == 0) {
		console.log("La ciudad no existe");
	} else {
		alumnosDeCiudad.forEach(a => console.log(a.nombre));
	}
}

function alumnosCurso() {
	let curso = prompt("Nombre alumno")

	let alumnosDeCurso = alumnos.filter(a => a.codigo.split("-")[1]==curso);

	if (alumnosDeCurso.length == 0) {
		console.log("No hay");
	} else {
		alumnosDeCurso.forEach(a => console.log(a.nombre));
	}
}


</script>

</html>
